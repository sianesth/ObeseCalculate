<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SiAnesthetics for obese patients</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≤‡∏° Tailwind bg-gray-100 */
        }

        /* ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏ñ‡∏ß‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡πà‡∏≤-‡∏Ñ‡∏µ‡∏¢‡πå‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô */
        .label-row {
            display: grid;
            grid-template-columns: 1fr 1fr; /* ‡∏™‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
            gap: 0.25rem 1rem;
            align-items: start;
            padding: 0.5rem 0.75rem;
            font-size: 0.90rem;
            line-height: 1.35;
            border-radius: 0.4rem;
            box-shadow: 0 1px 2px rgb(0 0 0 / 0.05);
        }

        .label-title {
            font-weight: 600;
            color: #000;
            white-space: pre-wrap;
            text-transform: capitalize;
            font-size: 0.90rem;
            line-height: 1.2;
            min-width: 150px; /* ‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
        }

        /* ‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏∑‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö label-title ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ */
        .section-content-area .label-title {
            padding-left: 1.5ch; /* ‡πÄ‡∏¢‡∏∑‡πâ‡∏≠‡∏á‡πÑ‡∏õ 1.5 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ */
        .label-result {
            font-weight: 600;
            color: #1e3a8a;
            white-space: pre-wrap;
            line-height: 1.35;
            font-size: 0.90rem;
            text-align: left; /* ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô div ‡∏ô‡∏µ‡πâ‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á */
        }

        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô (‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö/‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå) --- */
        .section-header-box { /* ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å */
            padding: 0.5rem 0.75rem;
            border-radius: 0.4rem;
            box-shadow: 0 1px 2px rgb(0 0 0 / 0.05);
            margin-bottom: 0.5rem; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) */
            font-size: 0.9rem;
            font-weight: 600;
            color: #000;
            min-height: 48px;
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö */
        .section-header-box.with-toggle {
            display: grid; /* ‡πÉ‡∏ä‡πâ grid ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö/‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå */
            grid-template-columns: 1fr auto; /* ‡∏™‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå: ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÅ‡∏£‡∏Å‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠, ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ */
            align-items: center;
        }

        .section-header-box.with-toggle > label:first-child { /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á */
            grid-column: 1;
            text-align: left;
        }

        .section-header-box.with-toggle > label.switch { /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö */
            grid-column: 2;
            justify-self: end; /* ‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏•‡∏•‡πå grid */
            margin-right: 8ch; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢ 'ch' ‡∏ã‡∏∂‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ '0' */
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Fentanyl ‡πÅ‡∏•‡∏∞ Neostigmine ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô label-row */
        .fentanyl-neostigmine-header {
            display: grid; /* ‡πÉ‡∏ä‡πâ grid ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á */
            grid-template-columns: 1fr 1fr; /* ‡∏™‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô label-row */
            gap: 0.25rem 1rem; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô label-row */
            align-items: start;
            padding: 0.5rem 0.75rem; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
            font-size: 0.90rem; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
            line-height: 1.35; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Fentanyl/Neostigmine */
        .fentanyl-neostigmine-header .label-title {
            font-weight: 600;
        }

        .fentanyl-neostigmine-header .label-result {
            font-weight: 600;
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÉ‡∏ï‡πâ header-result (‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á label-result) */
        .label-result span {
            font-weight: normal;
            font-size: 0.75em;
            display: inline; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å block ‡πÄ‡∏õ‡πá‡∏ô inline */
            line-height: 1.1;
        }

        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) --- */
        .section-content-area {
            display: block;
            padding-left: 0;
            padding-right: 0;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á label-rows ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .section-content-area .label-row {
            margin-bottom: 0.5rem;
            box-shadow: 0 1px 2px rgb(0 0 0 / 0.05);
        }

        /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô */
        .propofol-header-bg { background-color: #FFF2B2; }
        .fentanyl-header-bg { background-color: #a7d9ed; }
        .musclerelaxant-header-bg { background-color: #FF9BA3; }
        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á Neostigmine ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠ */
        .neostigmine-header-bg {
            background-color: #ffffff; /* ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
            border: 2.5px dashed red; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏¢‡∏≤‡∏ß‡∏™‡∏µ‡πÅ‡∏î‡∏á */
        }
        .medications-header-bg { background-color: #ccdad1; }
        .extra-header-bg { background-color: #f4f3ee; }

        /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏°‡πà */
        #Prop.section-content-area .label-row {
            background-color: #fefae0;
        }

        #musc.section-content-area .label-row {
            background-color: #FFBCC1
        }

        #meds.section-content-area .label-row {
            background-color: #e2ece9;
        }

        #extra.section-content-area .label-row {
            background-color: #fbfaf8;
        }

        /* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö (Toggle Switch) --- */
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #b0bec5;
            transition: 0.4s; border-radius: 24px;
        }
        .slider:before {
            position: absolute; content: ""; height: 18px; width: 18px;
            left: 3px; bottom: 3px; background-color: white;
            transition: 0.4s; border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input:checked + .slider {
            background-color: #42a5f5;
        }
        input:checked + .slider:before { transform: translateX(20px); }

        .section-header-box.with-toggle > label.switch {
            grid-column: 2;
            justify-self: end;
            margin-right: 3ch;
        }

        /* ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô */
        /* ‡∏•‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏Å */
        #mainResultContainer {
            margin-top: 0.75rem; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏£‡∏Å */
            padding-top: 0; /* ‡∏•‡∏ö padding ‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏° */
            padding-bottom: 0; /* ‡∏•‡∏ö padding ‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏° */
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö baseInfo (BMI/Category) */
        #baseInfo {
            margin-bottom: 0;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            box-shadow: none; /* ‡∏•‡∏ö‡πÄ‡∏á‡∏≤ */
            border: none; /* ‡∏•‡∏ö‡∏Ç‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å #baseInfo */
        }

        /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ label-row ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô #baseInfo ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ö */
        #baseInfo .label-row {
            box-shadow: none; /* ‡∏•‡∏ö‡πÄ‡∏á‡∏≤ */
            border: none; /* ‡∏•‡∏ö‡∏Ç‡∏≠‡∏ö */
            background-color: transparent; /* ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ bg-gray-100 ‡∏à‡∏≤‡∏Å Tailwind */
        }

        /* ‡∏Ñ‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î border radius ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö baseInfo */
        #baseInfo.rounded-xl {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏£‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏≤‡∏Å‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô */
        #resultSections > div:first-child { /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Propofol */
            margin-top: 0; /* ‡πÑ‡∏°‡πà‡∏°‡∏µ margin-top ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤ baseInfo ‡πÑ‡∏°‡πà‡∏°‡∏µ margin-bottom */
            border-top-left-radius: 0; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏∏‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡∏Å‡∏±‡∏ö baseInfo */
            border-top-right-radius: 0;
        }

        /* ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏°‡∏µ margin-top ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô */
        #resultSections > .section-header-box {
            margin-top: 0.75rem; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏¢‡∏≤ */
        }
        /* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏£‡∏Å‡∏™‡∏∏‡∏î‡πÉ‡∏ô resultSections (Propofol) ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ margin-top */
        #resultSections > .section-header-box:first-of-type {
            margin-top: 0;
        }

        /* ‡∏ñ‡πâ‡∏≤ baseInfo ‡πÅ‡∏•‡∏∞ resultSections ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏†‡∏≤‡∏û ‡πÉ‡∏´‡πâ‡∏•‡∏ö box-shadow ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô */
        #baseInfo + #resultSections > .section-header-box:first-of-type {
            box-shadow: 0 1px 2px rgb(0 0 0 / 0.05); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏¢‡∏≤‡πÅ‡∏£‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á */
        }

    </style>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#22c55e">
</head>

<body class="bg-gray-100 text-gray-800">
    <header class="bg-gray-100 py-1 pb-2 z-10 relative">
        <div class="flex items-center gap-3 justify-center px-4 max-w-full">
            <img src="logo1.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä" class="w-12 sm:w-14 h-auto flex-shrink-0">
            <div class="text-sm text-gray-800 leading-snug text-center">
                <h1 class="font-semibold text-base sm:text-lg">Anesthetics for obese patients</h1>
                <p class="text-gray-600 text-sm sm:text-base">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ obesity (BMI ‚â•30)</p>
            </div>
        </div>
    </header>

    <main class="mx-auto px-3 max-w-screen-sm mt-0">
        <div class="bg-white p-4 pl-10 rounded-xl shadow-md space-y-4">
            <div role="radiogroup" aria-labelledby="gender-label">
                <label id="gender-label" class="block font-medium mb-1">Gender :</label>
                <div class="flex space-x-4">
                    <button type="button" class="bg-white px-4 py-1.5 border rounded mr-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" id="btnMale" role="radio" aria-checked="false" onclick="selectSex('male')">üë¶üèª Male</button>
                    <button type="button" class="bg-white px-4 py-1.5 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" id="btnFemale" role="radio" aria-checked="false" onclick="selectSex('female')">üëßüèª Female</button>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <label for="weight" class="font-medium w-28">Weight (kg):</label>
                <input type="number" id="weight" class="border rounded px-3 py-1.5 w-20 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" placeholder="XXX" autocomplete="off" />
            </div>

            <div class="flex items-center gap-2">
                <label for="height" class="font-medium w-28">Height (cm):</label>
                <input type="number" id="height" class="border rounded px-3 py-1.5 w-20 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" placeholder="‡πÄ‡∏ä‡πà‡∏ô XXX" autocomplete="off" />
            </div>

            <div class="flex gap-4 ">
                <button type="button" class="bg-green-500 text-white px-3 py-1.5 rounded hover:bg-green-600 w-fit focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50" onclick="calculate()">Calculate</button>
                <button type="button" class="bg-gray-400 text-white px-3 py-1.5 rounded hover:bg-gray-500 w-fit" onclick="resetForm()">Reset</button>
            </div>
        </div>

        <div id="mainResultContainer" class="hidden mt-1 rounded-xl">
            <div class="bg-gray-100 rounded-t-xl rounded-b-none shadow-md p-4 leading-tight" id="baseInfo"></div>

            <div id="resultSections" class="hidden rounded-b-xl">
                <div class="section-header-box propofol-header-bg with-toggle" id="toggleProp">
                    <label class="font-semibold text-[0.95rem]">1. Propofol</label>
                    <label class="switch">
                        <input onclick="toggle('Prop')" type="checkbox" autocomplete="off" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="hidden section-content-area" id="Prop"></div>

                <div class="section-header-box fentanyl-header-bg fentanyl-neostigmine-header" id="fentanylHeader">
                    <div class="label-title">2. Fentanyl</div>
                    <div id="fentanylResult" class="label-result"></div>
                </div>

                <div class="section-header-box musclerelaxant-header-bg with-toggle" id="toggleMusc">
                    <label class="font-semibold text-[0.95rem]">3. Muscle relaxant</label>
                    <label class="switch">
                        <input onclick="toggle('musc')" type="checkbox" autocomplete="off" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="hidden section-content-area" id="musc"></div>

                <div class="section-header-box neostigmine-header-bg fentanyl-neostigmine-header" id="neostigmineHeader">
                    <div class="label-title">4. Neostigmine</div>
                    <div id="neostigmineResult" class="label-result"></div>
                </div>

                <div class="section-header-box medications-header-bg with-toggle" id="toggleMeds">
                    <label class="font-semibold text-[0.95rem]">5. Other medications</label>
                    <label class="switch">
                        <input onclick="toggle('meds')" type="checkbox" autocomplete="off" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="hidden section-content-area" id="meds"></div>

                <div class="section-header-box extra-header-bg with-toggle" id="toggleExtra">
                    <label class="font-semibold text-[0.95rem]">6. Addition information</label>
                    <label class="switch">
                        <input onclick="toggle('extra')" type="checkbox" autocomplete="off" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="hidden section-content-area" id="extra"></div>
            </div>
        </div>
    </main>

    <footer class="text-center text-[0.65rem] text-gray-500 mt-10 px-4">
        <p>&copy; 2025 | ‡∏†‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏µ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡∏Ñ‡∏ì‡∏∞‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
        <p>Version 1.0</p>
    </footer>

    <script>
        let sex = '';

        // ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ñ‡∏∂‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö DOM ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
        const btnMale = document.getElementById('btnMale');
        const btnFemale = document.getElementById('btnFemale');
        const weightInput = document.getElementById('weight');
        const heightInput = document.getElementById('height');

        // ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (BMI/Category ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-6)
        const mainResultContainer = document.getElementById('mainResultContainer');
        const baseInfoDiv = document.getElementById('baseInfo'); // BMI, Category ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
        const resultSectionsDiv = document.getElementById('resultSections'); // ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-6

        // ‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (div ‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ)
        const propDiv = document.getElementById('Prop');
        const muscDiv = document.getElementById('musc');
        const medsDiv = document.getElementById('meds');
        const extraDiv = document.getElementById('extra');

        // ‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ñ‡∏∂‡∏á div ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå *‡∏†‡∏≤‡∏¢‡πÉ‡∏ô* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î
        const fentanylResultDiv = document.getElementById('fentanylResult');
        const neostigmineResultDiv = document.getElementById('neostigmineResult');

        // ‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (div ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏≤‡∏™ section-header-box)
        const togglePropHeader = document.getElementById('toggleProp');
        const fentanylHeader = document.getElementById('fentanylHeader');
        const toggleMuscHeader = document.getElementById('toggleMusc');
        const neostigmineHeader = document.getElementById('neostigmineHeader');
        const toggleMedsHeader = document.getElementById('toggleMeds');
        const toggleExtraHeader = document.getElementById('toggleExtra');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏π‡∏ó‡∏¥‡∏•‡∏¥‡∏ï‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
        const range = (low, high, unit) => `${low.toFixed(0)} - ${high.toFixed(0)} ${unit}`;
        const single = (val, unit) => {
            const fixedVal = parseFloat(val.toFixed(2));
            return `${fixedVal} ${unit}`;
        };

        function selectSex(val) {
            sex = val;
            btnMale.classList.remove('bg-blue-500', 'text-white');
            btnFemale.classList.remove('bg-blue-500', 'text-white');

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ ARIA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á (accessibility)
            btnMale.setAttribute('aria-checked', 'false');
            btnFemale.setAttribute('aria-checked', 'false');

            if (val === 'male') {
                btnMale.classList.add('bg-blue-500', 'text-white');
                btnMale.setAttribute('aria-checked', 'true');
            } else {
                btnFemale.classList.add('bg-blue-500', 'text-white');
                btnFemale.setAttribute('aria-checked', 'true');
            }
        }

        function toggle(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        function resetForm() {
            sex = '';
            weightInput.value = '';
            heightInput.value = '';
            btnMale.classList.remove('bg-blue-500', 'text-white');
            btnFemale.classList.remove('bg-blue-500', 'text-white');

            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ ARIA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏®
            btnMale.setAttribute('aria-checked', 'false');
            btnFemale.setAttribute('aria-checked', 'false');

            mainResultContainer.classList.add('hidden'); // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            resultSectionsDiv.classList.add('hidden'); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-6 ‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ)
            togglePropHeader.classList.remove('hidden');
            fentanylHeader.classList.remove('hidden');
            toggleMuscHeader.classList.remove('hidden');
            neostigmineHeader.classList.remove('hidden');
            toggleMedsHeader.classList.remove('hidden');
            toggleExtraHeader.classList.remove('hidden');

            // ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå
            const toggledSections = ['Prop', 'musc', 'meds', 'extra'];
            toggledSections.forEach(id => {
                const sectionContent = document.getElementById(id);
                sectionContent.classList.add('hidden'); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô

                const toggleContainerId = `toggle${id.charAt(0).toUpperCase() + id.slice(1)}`;
                const toggleSwitchContainer = document.getElementById(toggleContainerId);
                if (toggleSwitchContainer) {
                    const toggleSwitch = toggleSwitchContainer.querySelector('input[type="checkbox"]');
                    if (toggleSwitch) {
                        toggleSwitch.checked = false; // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå
                    }
                }
            });

            // ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á div ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á Fentanyl ‡πÅ‡∏•‡∏∞ Neostigmine
            baseInfoDiv.innerHTML = '';
            propDiv.innerHTML = '';
            fentanylResultDiv.innerHTML = '';
            muscDiv.innerHTML = '';
            neostigmineResultDiv.innerHTML = '';
            medsDiv.innerHTML = '';
            extraDiv.innerHTML = '';
        }

        function labelRow(label, value) {
            return `
                <div class="label-row">
                    <div class="label-title">${label}</div>
                    <div class="label-result">${value}</div>
                </div>
            `;
        }

        function calculateBodyMetrics(w, h, sex) {
            const bmi = w / ((h / 100) ** 2);
            const cat = bmi < 18.5 ? 'Underweight' :
                        bmi < 25 ? 'Normal' :
                        bmi < 30 ? 'Overweight' :
                        bmi < 35 ? 'Obese GRADE I' :
                        bmi < 40 ? 'Obese GRADE II' :
                        'Obese GRADE III/Morbidly Obese';
            const inch = h / 2.54;
            const ibw = sex === 'male' ? 50 + 2.3 * (inch - 60) : 45.5 + 2.3 * (inch - 60);
            const lbw = sex === 'male' ? (9270 * w) / (6680 + 216 * bmi) : (9270 * w) / (8780 + 244 * bmi);
            const adjbw = w > ibw ? ibw + 0.4 * (w - ibw) : ibw;
            const pbw = sex === 'male' ? 50 + 0.91 * (h - 152.4) : 45.5 + 0.91 * (h - 152.4);
            return { bmi, cat, ibw, lbw, adjbw, pbw };
        }

        function updateBaseInfoDisplay(bmi, cat, isNormal) {
            baseInfoDiv.classList.remove('rounded-xl');
            baseInfoDiv.classList.add('rounded-t-xl', 'rounded-b-none');
            let htmlContent = `${labelRow('BMI', bmi.toFixed(1))}${labelRow('Category', cat)}`;
            if (isNormal) {
                htmlContent += `
                    <div class="mt-4 text-center text-red-600 font-semibold text-base">
                        *üíâ ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ üíâ*
                    </div>
                `;
            }
            baseInfoDiv.innerHTML = htmlContent;
        }

        function renderDrugSections(lbw, adjbw, w, ibw, pbw) {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 'Normal' (‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Normal)
            togglePropHeader.classList.remove('hidden');
            fentanylHeader.classList.remove('hidden');
            toggleMuscHeader.classList.remove('hidden');
            neostigmineHeader.classList.remove('hidden');
            toggleMedsHeader.classList.remove('hidden');
            toggleExtraHeader.classList.remove('hidden');

            // --- 1. Propofol (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) ---
            propDiv.innerHTML = `
                ${labelRow('Induction', `${range(1.5 * lbw, 2.5 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(1.5‚Äì2.5 mg/kg LBW)</span>`)}
                ${labelRow('Infusion <span class="font-normal">(GA)</span>',
                                `${range(adjbw * 0.1 * 60, adjbw * 0.2 * 60, 'mg/hr')}<br><span class='font-normal text-[0.75em]'>(100‚Äì200 mcg/kg/min AdjBW)</span>`)}
                ${labelRow('Infusion <span class="font-normal">(Sedation)</span>',
                                `${range(adjbw * 0.025 * 60, adjbw * 0.1 * 60, 'mg/hr')}<br><span class='font-normal text-[0.75em]'>(25‚Äì100 mcg/kg/min AdjBW)</span>`)}
            `;

            // --- 2. Fentanyl (‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠) ---
            fentanylResultDiv.innerHTML = `${range(1 * lbw, 2 * lbw, 'mcg')}<br><span class='font-normal text-[0.75em]'>(1‚Äë2 mcg/kg LBW)</span>`;

            // --- 3. Muscle relaxant (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) ---
            muscDiv.innerHTML = `
                ${labelRow('Succinylcholine', `${single(w, 'mg')}<br><span class='font-normal text-[0.75em]'>(1 mg/kg TBW)</span>`)}
                ${labelRow('Atracurium', `${single(0.6 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.6 mg/kg LBW)</span>`)}
                ${labelRow('Cisatracurium', `${single(0.15 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.15 mg/kg LBW)</span>`)}
                ${labelRow('Rocuronium', `${range(0.6 * lbw, 0.9 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.6‚Äë0.9 mg/kg LBW)</span>`)}
            `;

            // --- 4. Neostigmine (‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠) ---
            neostigmineResultDiv.innerHTML = `${single(0.05 * adjbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.05 mg/kg AdjBW)</span>`;

            // --- 5. Other medications (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) ---
            medsDiv.innerHTML = `
                ${labelRow('Etomidate', `${range(0.2 * lbw, 0.3 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.2‚Äë0.3 mg/kg LBW)</span>`)}
                ${labelRow('Thiopental', `${range(3 * lbw, 5 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(3‚Äë5 mg/kg LBW)</span>`)}
                ${labelRow('Ketamine <span class="font-normal">(Infusion)</span>',
                                `${range(0.5 * lbw, 1 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.5‚Äë1 mg/kg LBW)</span>`)}
                ${labelRow('Midazolam', `${range(0.05 * lbw, 0.1 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.05‚Äë0.1 mg/kg LBW)</span>`)}
                ${labelRow('Dexmedetomidine <span class="font-normal">(Loading infusion)</span>',
                                `${range(0.5 * lbw, 1 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.5‚Äë1 mg/kg LBW)</span>`)}
                ${labelRow('Morphine', `${range(0.05 * lbw, 0.1 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(0.05‚Äë0.1 mg/kg LBW)</span>`)}
                ${labelRow('Sugammadex', `${range(2 * adjbw, 4 * adjbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(2‚Äë4 mg/kg AdjBW)</span>`)}
                ${labelRow('Lidocaine <span class="font-normal">(IV)</span>',
                                `${range(1 * lbw, 2 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(1‚Äë2 mg/kg LBW)</span>`)}
                ${labelRow('Lidocaine <span class="font-normal">(Local)</span>',
                                `${range(5 * lbw, 7 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(5‚Äë7 mg/kg LBW)</span>`)}
                ${labelRow('Bupivacaine <span class="font-normal">(Local)</span>',
                                `${single(3 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(3 mg/kg LBW)</span>`)}
                ${labelRow('Paracetamol', `${single(15 * lbw, 'mg')}<br><span class='font-normal text-[0.75em]'>(15 mg/kg LBW)</span>`)}
            `;

            // --- 6. Additional Information (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ) ---
            extraDiv.innerHTML = `
                ${labelRow('IBW <span class="font-normal">(Ideal Body Weight)</span>',
                                `${ibw.toFixed(0)} kg <span class="font-normal text-[0.75em] ">(‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏£‡∏ô‡πâ‡∏≥)</span>`)}
                ${labelRow('LBW <span class="font-normal">(Lean Body Weight)</span>',
                                `${lbw.toFixed(0)} kg`)}
                ${labelRow('AdjBW <span class="font-normal">(Adjusted Body Weight)</span>',
                                `${adjbw.toFixed(0)} kg`)}
                ${labelRow('PBW <span class="font-normal">(Predicted Body Weight)</span>',
                                `${pbw.toFixed(0)} kg <span class="font-normal text-[0.75em]">(‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ventilator setting)</span>`)}
            `;
        }

        function resetDrugSectionsContent() {
            propDiv.innerHTML = '';
            fentanylResultDiv.innerHTML = '';
            muscDiv.innerHTML = '';
            neostigmineResultDiv.innerHTML = '';
            medsDiv.innerHTML = '';
            extraDiv.innerHTML = '';

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô
            const toggledSections = ['Prop', 'musc', 'meds', 'extra'];
            toggledSections.forEach(id => {
                const sectionContent = document.getElementById(id);
                sectionContent.classList.add('hidden');
                const toggleSwitchContainer = document.getElementById(`toggle${id.charAt(0).toUpperCase() + id.slice(1)}`);
                if (toggleSwitchContainer) {
                    const toggleSwitch = toggleSwitchContainer.querySelector('input[type="checkbox"]');
                    if (toggleSwitch) {
                        toggleSwitch.checked = false;
                    }
                }
            });
        }

        function calculate() {
            const w = parseFloat(weightInput.value);
            const h = parseFloat(heightInput.value);

            if (!sex || isNaN(w) || isNaN(h)) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏® ‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å-‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
                return;
            }

            const { bmi, cat, ibw, lbw, adjbw, pbw } = calculateBodyMetrics(w, h, sex);

            mainResultContainer.classList.remove('hidden'); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏™‡∏°‡∏≠

            if (cat === 'Normal') {
                resultSectionsDiv.classList.add('hidden'); // ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-6
                updateBaseInfoDisplay(bmi, cat, true); // true ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
                resetDrugSectionsContent(); // ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô
            } else {
                resultSectionsDiv.classList.remove('hidden'); // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-6
                updateBaseInfoDisplay(bmi, cat, false); // false ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
                renderDrugSections(lbw, adjbw, w, ibw, pbw); // ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
            }

            sendToGoogleSheets({
                sex,
                weight: w,
                height: h,
                bmi: bmi.toFixed(1),
                category: cat,
                ibw: ibw.toFixed(0),
                lbw: lbw.toFixed(0),
                adjbw: adjbw.toFixed(0),
                pbw: pbw.toFixed(0),
                propofolInduction: `${(1.5 * lbw).toFixed(0)} - ${(2.5 * lbw).toFixed(0)} mg`,
                propofolInfusionSedation: `${(adjbw * 0.025 * 60).toFixed(0)} - ${(adjbw * 0.1 * 60).toFixed(0)} mg/hr`,
                propofolInfusionGA: `${(adjbw * 0.1 * 60).toFixed(0)} - ${(adjbw * 0.2 * 60).toFixed(0)} mg/hr`,
                fentanyl: `${(1 * lbw).toFixed(0)} - ${(2 * lbw).toFixed(0)} mcg`,
                succinylcholine: `${w.toFixed(0)} mg`,
                atracurium: `${(0.6 * lbw).toFixed(0)} mg`,
                cisatracurium: `${(0.15 * lbw).toFixed(0)} mg`,
                rocuronium: `${(0.6 * lbw).toFixed(0)} - ${(0.9 * lbw).toFixed(0)} mg`,
                neostigmine: `${(0.05 * adjbw).toFixed(2)} mg`,
                etomidate: `${(0.2 * lbw).toFixed(0)} - ${(0.3 * lbw).toFixed(0)} mg`,
                thiopental: `${(3 * lbw).toFixed(0)} - ${(5 * lbw).toFixed(0)} mg`,
                ketamine: `${(0.5 * lbw).toFixed(0)} - ${(1 * lbw).toFixed(0)} mg`,
                midazolam: `${(0.05 * lbw).toFixed(2)} - ${(0.1 * lbw).toFixed(2)} mg`,
                dexmedetomidine: `${(0.5 * lbw).toFixed(2)} - ${(1 * lbw).toFixed(2)} mg`,
                morphine: `${(0.05 * lbw).toFixed(2)} - ${(0.1 * lbw).toFixed(2)} mg`,
                sugammadex: `${(2 * adjbw).toFixed(2)} - ${(4 * adjbw).toFixed(2)} mg`,
                lidocaineIV: `${(1 * lbw).toFixed(0)} - ${(2 * lbw).toFixed(0)} mg`,
                lidocaineLocal: `${(5 * lbw).toFixed(0)} - ${(7 * lbw).toFixed(0)} mg`,
                bupivacaineLocal: `${(3 * lbw).toFixed(0)} mg`,
                paracetamol: `${(15 * lbw).toFixed(0)} mg`
            });
        }

        function sendToGoogleSheets(data) {
            fetch("https://script.google.com/macros/s/AKfycbxqVmSgnJgG4eVj4z2hWD2tJuWO1vZGQIaJrSfRguzmmf_8Iq0Edycq6HfJDu7n9rw/exec", {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });
        }
    </script>
</body>
</html>